import os
from pathlib import Path
import sys
sys.path.append('src')

from malware_detector import subDetector_opcode
from preprocess import disassemble_helper

class rescueUtils(subDetector_opcode):
    def __init__(self) -> None:
        super().__init__()
        
    def fix_partial_disassembly(self):
        disased_list = os.listdir(self.config.folder.disassemble)
        unextended_list = []
        for i in disased_list:
            unextended_list.append(Path(i).stem)
        diff = set(self.file_list) - set(unextended_list)
        self.POOL.map(disassemble_helper, diff)

if __name__ == '__main__':
    ru = rescueUtils()
    # ru.fix_partial_disassembly()