import setting
from setting import helper
import preprocess
# import feature_selection
# import vectorization

if __name__ == "__main__":

    # preprocess: disassemble and save in json and csv files
    # TODO: test if there are malwares and benign wares, the function is still right 
    file_list = helper.get_file_list(setting.dataset_directory_path)
    wt = 'malware'
    # TODO: renew the progress
    for i in file_list:
        input_pool = []
        for j in range(setting.cpu_num):
            pp = preprocess(wt, setting.dataset_directory_path, i)
            input_pool.append(pp)
        setting.pool.map(pp.preprocess_helper, input_pool)
    
    # feature selection
    '''
    fs = feature_selection()
    df = feature_selection.feature_selection_helper()
    '''

    # vectorization
    '''
    file_list = helper.get_file_list(setting.dataset_directory_path)
    wt = 'malware'
    # TODO: renew the progress
    for i in file_list:
        input_pool = []
        for j in range(setting.cpu_num):
            vec = vectorization(df, wt, file_name)
            input_pool.append(vec)
        setting.pool.map(vec.vectorization_helper, input_pool)
    '''
